<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>엄태준 (ISTP)</title>
    <link rel="stylesheet" href="detail_style.css">
</head>

<body>
    <div class="header">
        <h1>엄태준 (ISTP)</h1>
        <img src="https://blog.kakaocdn.net/dn/d5ibuk/btsEy0TzNTY/FFKAzq4gRQz8NWw0ItGm91/img.jpg" alt="제목 사진">
    </div>
    <div class="container">
        <img src="Image.JPG" alt="본문 사진">
        <div class="content">
            <h3 class="content-title">저를 소개합니다!</h3>
            <p class="content-text">제 이름은 엄태준 MBTI는 ISTP입니다. <br>배드민턴을 좋아하며 여행도 좋아합니다.</p>
            <h3 class="content-title">어서와 개발은 처음이지?</h3>
            <p class="content-text">이제 막 시작해서 있어서 어려움이 많습니다...<br>여러 도움 주시면 감사하겠습니다..!</p>

        </div>
    </div>

    <!-- 팀원 카드가 표시될 영역 -->
    <div class="teamCardSection" id="teamCardSection"></div>

</body>
<script type="module">
    // Firebase SDK import
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    // Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyAcNxdfupglLDv1Z18wYRBn-AZelw8OhEk",
        authDomain: "introduce-ourselves.firebaseapp.com",
        projectId: "introduce-ourselves",
        storageBucket: "introduce-ourselves.firebasestorage.app",
        messagingSenderId: "510644864006",
        appId: "1:510644864006:web:b252705d880832136c6f87",
        measurementId: "G-SK0R8C7M9R"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // 제외할 사용자 ID 설정 (예: 'myUserId'가 본인의 ID 값일 때)
    const myUserId = "JztqjLiHbjEGWLjfGfvl";

    // Firestore에서 모든 멤버 데이터를 불러와 카드를 생성하는 함수
async function loadMemberCards() {
    try {
        // Firestore에서 모든 멤버 문서 가져오기
        const querySnapshot = await getDocs(collection(db, 'members'));
        
        // 각 문서에 대해 카드 생성
        querySnapshot.forEach((doc) => {
            if (doc.id !== myUserId) { // 본인의 ID와 다를 경우에만 카드 생성
                const memberData = doc.data(); // 문서의 데이터 가져오기
                const card = createMemberCard(memberData, doc.id); // `doc.id`를 추가하여 전달
                document.getElementById("teamCardSection").appendChild(card);
            }
        });
    } catch (error) {
        console.error("Error fetching members data:", error);
    }
}

// 멤버 카드 생성 함수
function createMemberCard(member, id) {
    // 요소 생성 및 클래스 추가
    const card = document.createElement("div");
    card.className = "teamCard";

    const img = document.createElement("img");
    img.src = member.image_url || "default-image.jpg"; // 이미지 URL이 없으면 기본 이미지 사용
    img.className = "team card_img";
    img.alt = "팀원 사진";

    const cardBody = document.createElement("div");
    cardBody.className = "card-body";

    const cardTitle = document.createElement("h5");
    cardTitle.className = "card-title";
    cardTitle.innerText = `${member.name} (${member.mbti})`; // 멤버 이름과 MBTI 표시

    // 카드 클릭 시 개인페이지 이동
    card.onclick = () => {
        window.location.href = `../../member/${member.name}/detail_page.html?id=${id}`;
    };

    // 요소들을 카드에 추가
    cardBody.appendChild(cardTitle);
    card.appendChild(img);
    card.appendChild(cardBody);

    return card; // 완성된 카드를 반환
}

    // 페이지 로드 시 모든 멤버 카드 로드
    loadMemberCards();
</script>

</html>